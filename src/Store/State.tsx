import * as Redux from 'redux';
import { REHYDRATE } from 'redux-persist/constants';
import { FanchartSettings } from '../Store/Fanchart';
import { PedigreeSettings } from '../Store/Pedigree';
import { PersonSet } from '../Store/Person';
import { SourceSet } from '../Store/Source';
import { HistoryItem } from '../Store/History';
import { actionCreator } from '../Store/Actions';
import { GenealogyEventSet } from '../Store/Event';
import { PlaceSet } from '../Store/Place';

export interface AppState {
   pedigree: PedigreeSettings;
   fanchart: FanchartSettings;
   persons: PersonSet;        // details for all persons
   places: PlaceSet;          // details for all places
   events: GenealogyEventSet; // all known events
   sources: SourceSet;
   history: HistoryItem[];    // id of persons recently visited
   csrf: string;              // CSRF token for Django
}

export type GPDispatch = Redux.Dispatch<AppState>;
export type GPStore = Redux.Store<AppState>;

/**
 * Rehydrate action generated by redux-persist
 */
export const rehydrate = actionCreator<AppState>(REHYDRATE);
rehydrate.type = REHYDRATE;   // no prefix

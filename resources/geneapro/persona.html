{% extends "geneapro/base.html" %}
{% block title %}GeneaPro: pedigree{% endblock %}
{% block css %}
.pedigree td.indiv {background:url({{MEDIA_URL}}horiz.png) left center no-repeat}

#containers tr > td:first-child {
   text-transform:capitalize;
   font-weight:bold;
   color:#AAA;
}

{% endblock css %}

{% block header %}
<link rel="stylesheet" href="{{MEDIA_URL}}datatables.css"/>
{% endblock header %}

{% block script %}
$(document).ready(function() {
$("#list").dataTable(
  {"bPaginate": false,
   "sDom": '<"top"fi>rt',
   "aaSorting": [[ 3, "asc" ]], // on dates
  }
);
});

{% endblock script %}

{% block endbody %}
{% endblock endbody %}

{% block leftside %}
{% endblock leftside %}

{% block contents %}

<h3 id="title">
   <span class="id">{{p.id}}</span>
   <span class="givenName">{{p.base_given_name}}</span>
   <span class="surName">{{p.base_surname}}</span>
   <span class="details">({{p.birth.date}} - {{p.death.date}})</span>
</h3>

<div id="containers">
 <table id="list">
   <thead>
      <tr>
         <th>Type</th>
         <th>Name</th>
         <th>Role</th>
         <th>Date</th>
         <th>Place</th>
         <th>Sources</th>
      </tr>
   </thead>
   <tbody>

   {% for k, c in chars.items %}
   <tr>
      {% if c.parts|length == 1 %}
      <td>{{c.parts.0.0}}</td>
      <td>{{c.parts.0.1}}</td>
      {% else %}
      <td>Char.</td>
      <td>

      {% for pname, pval in c.parts %}
      <span class="char">{{pname}}</span>: {{pval}}<br>
      {% endfor %}
      </td>
      {% endif %}

      <td></td>
      <td>{{c.Date|default:"-"}}</td>
      <td>{{c.place|default:"-"}}</td>
      <td>
         {% for s in c.sources %}
         <a href="/sources/{{s}}">{{s}}</a>
         {% endfor %}
      </td>
   </tr>
   {% endfor %}

   {% for i, e in events.items %}
      <tr>
         <td>{{e.0.type.name}}</td>
         <td>{{e.0.name}}</td>
         <td>{{e.1}}</td>
         <td>{{e.0.Date|default:"-"}}</td>
         <td>{{e.0.place|default:"-"}}</td>
         <td>
            {% for s in e.0.sources %}
            <a href="/sources/{{s}}">{{s}}</a>
            {% endfor %}
         </td>
      </tr>
   {% endfor %}

   {% for i, g in groups.items %}
      <tr>
         <td>Group</td>
         <td>{{g.name}}</td>
         <td>{{g.role|default:""}}</td>
         <td>{{g.date|default:"-"}}</td>
         <td>{{g.place|default:"-"}}</td>
         <td>
            {% for s in g.sources %}
            <a href="/sources/{{s}}">{{s}}</a>
            {% endfor %}
         </td>
      </tr>

   {% endfor %}
   </tbody>
 </table>
</div>
{% endblock contents %}


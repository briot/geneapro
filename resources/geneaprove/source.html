<div class='row'>

   <div class='col-md-12'>
      <div class='panel panel-default'>
         <div class='panel-heading editable-title' ng-click='showCitation=!showCitation'>
            <span class='fa fa-pencil editable-title' ng-bind-html='source.title'></span>
         </div>
         <div class='panel-body' ng-if='showCitation'>
            <h4>Citation</h4>
            <div class='row'>
               <div class='col-md-12 form-group floatlabel'>
                  <span ng-bind-html='source.title' class='form-control nonempty' readonly></span>
                  <label>Full Citation</label>
               </div>

               <div class='col-md-12 form-group floatlabel'>
                  <span ng-bind-html='source.abbrev' class='form-control nonempty' readonly></span>
                  <label>Short Citation</label>
               </div>

               <div class='col-md-12 form-group floatlabel'>
                  <span ng-bind-html='source.biblio' class='form-control nonempty' readonly></span>
                  <label>Bibliography Citation</label>
               </div>

               <div gp-float-label model='source.higher_source_id'
                    title='Select the source in which this one was found, for instance a specific will inside a will book'
                    label='Parent source'></div>
            </div>

            <h4>Citation Details</h4>
            <div class='row'>
               <div class='col-md-12 form-group floatlabel'>
                  <select id='_sourceType'
                     class='form-control'
                     ng-class='{nonempty: source.medium}'
                     title='Select the type of source. This will change the details below to those needed for proper citation'
                     ng-options='opt.id as opt.type group by opt.category for opt in source_types'
                     ng-model='source.medium' required>
                  </select>
                  <label>Source Type</label>
               </div>

               <div gp-float-label ng-repeat='p in required_parts'
                    model='cached_parts[p]'
                    label='{{p}}'></div>

               <!-- Should select whether this is a primary source,... (or
               original/derivative although this distinction is sometimes
               better left for each evidence/pieces of info found in this
               source.  See QuickLesson 2 from Elizabeth Shown Mill's website.
               Evidence is our interpretation of the pieces of information -->

           </div>

           <!-- Details common to all sources, needed by the GenTech data model -->

           <h4>Research Details</h4>
           <div class='row'>
              <div gp-float-label model='source.subject_date_id'
                   title="The date the source is about. This isn't the date of the source itself."
                   label='Subject date'></div>

              <div gp-float-label model='source.subject_place_id'
                   title="The place that the source is about"
                   label='Subject place'></div>

              <div gp-float-label model='source.jurisdiction_place_id'
                   title='Where the source was found'
                   label='Jurisdiction place'></div>

              <div class='col-md-6 form-group floatlabel'>
                 <input readonly class='nonempty form-control' value="{{source.researcher.name}} (changed on {{source.last_change | date}})"/>
                 <label>Researched by</label>
              </div>

              <div gp-float-label model='source.comments' label='Notes' size=12 lines=5></div>

            </div>
         </div>
      </div>
   </div>

   <!-- The media for the source -->
   <div class='col-md-12'>
      <div class='panel panel-default'>
         <div class='panel-heading'>Media</div>
         <div class='panel-body'>
         </div>
      </div>
   </div>

</div>

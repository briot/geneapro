<div class='row'>

   <div class='col-md-12'>
      <div class='panel panel-default'>
         <div class='panel-heading'>Citation details: {{source.title}}</div>
         <div class='panel-body'>
            <div class='col-md-12 form-group floatlabel'>
               <select id='_sourceType'
                  class='form-control'
                  ng-class='{nonempty: source.medium}'
                  title='Select the type of source. This will change the details below to those needed for proper citation'
                  ng-options='opt.id as opt.type group by opt.category for opt in source_types'
                  ng-model='source.medium' required>
               </select>
               <label>Source Type</label>
            </div>

            <div gp-float-label model='source.higher_source_id'
                 title='Select the source in which this one was found, for instance a specific will inside a will book'
                 label='Parent source'></div>


            <div gp-float-label ng-repeat='p in required_parts'
                 model='cached_parts[p]'
                 label='{{p}}'></div>

            <!-- Should select whether this is a primary source,... (or
            original/derivative although this distinction is sometimes
            better left for each evidence/pieces of info found in this
            source.  See QuickLesson 2 from Elizabeth Shown Mill's website.
            Evidence is our interpretation of the pieces of information -->

         </div>
      </div>
   </div>

   <!-- Details common to all sources, needed by the GenTech data model -->
   <div class='col-md-12'>
      <div class='panel panel-default'>
         <div class='panel-heading'>Research details</div>
         <div class='panel-body'>

            <div gp-float-label model='source.subject_date_id'
                 title="The date the source is about. This isn't the date of the source itself."
                 label='Subject date'></div>

            <div gp-float-label model='source.subject_place_id'
                 title="The place that the source is about"
                 label='Subject place'></div>

            <div gp-float-label model='source.jurisdiction_place_id'
                 title='Where the source was found'
                 label='Jurisdiction place'></div>

            <div gp-float-label model='source.abbrev' label='Abbrev.'></div>

            <div gp-float-label model='source.title' label='Title' lines=3></div>
            <div gp-float-label model='source.biblio' label='Biblio' lines=3></div>
            <div gp-float-label model='source.comments' label='Notes' lines=3></div>

            <div class='col-md-6 floatlabel form-group'>
               <input readonly class='nonempty form-control' value="{{source.researcher.name}} (changed on {{source.last_change | date}})"/>
               <label>Researched by</label>
            </div>
         </div>
      </div>
   </div>
</div>
